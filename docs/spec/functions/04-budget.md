# 5. 予算（Budget）

- 索引: [機能仕様書](../functions.md)
- 関連要件: [要求仕様書](../requirements.md)
- 関連ユースケース: [ユースケース定義書](../usecases.md)

---

## 5.1 定義

年度×カテゴリ単位で設定される金額の目安。

## 5.2 属性

| 属性名       | 型       | 必須 | 説明                 |
| ------------ | -------- | ---- | -------------------- |
| fiscalYear   | 年度     | ○    | 対象年度             |
| categoryId   | ID       | ○    | 対象カテゴリ         |
| budgetAmount | 正の整数 | ○    | 予算額（年額ベース） |

**注記**: Budget は id 属性を持たず、(fiscalYear, categoryId) の複合キーで一意性を保証する。これは予算が「年度×カテゴリ」という概念的な組み合わせであり、独立したエンティティというより関係性を表すためである。

## 5.3 仕様

- 収入カテゴリ・支出カテゴリの双方に予算を設定できる
- 予算は年額ベースで管理する
- 強制制約ではない（超過入力を禁止しない）
- 実績との差分を可視化する

## 5.4 整合条件（警告のみ）

以下の条件を満たさない場合、警告を表示する。ただし操作は制限しない。

```
年度支出予算合計 ≤ 年度収入予算合計
```

## 5.5 予算定義ヘルパ

予算入力時の補助機能として、以下のパターンに対応する。

| パターン   | 説明                          |
| ---------- | ----------------------------- |
| 月額固定   | 月額を入力し ×12 で年額を算出 |
| 月ごと変動 | 各月の金額を入力し年額を合算  |

以下には対応しない:

- 実績からの自動算出
- 予算の自動調整

---
