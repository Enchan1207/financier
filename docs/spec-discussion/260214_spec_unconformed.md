# 260214 仕様不整合箇所洗い出し

修正すべき不整合（3件）

1. UC-5.5 の事後条件で未来日の考慮漏れ
usecases.md の UC-5.5（テンプレートからの一括登録）の事後条件が「内部残高・予算実績が更新される」と 無条件 になっています。UC-1.1 では「当該日付が過去または当日の場合」と条件を付けているため、整合していません。

2. イベント「削除」のUCが存在しない
エッジケース表に「イベント削除時の取引処理」が定義されていますが、イベント削除のユースケースが存在しません。functions.md にも削除の仕様はありません。

3. requirements.md で予算実績への未来日除外が明記されていない
requirements.md §3.8 では内部残高の未来日除外のみ記載されていますが、functions.md・usecases.md では 予算実績も同様に除外 と明記されています。

明記推奨（4件）
4. Budget に id 属性がない
他のエンティティはすべて id を持っていますが、Budget だけ複合キー（fiscalYear × categoryId）になっています。意図的であれば注記が必要です。

5–6. UC-7.5/7.6/7.7 の機能仕様が functions.md に不足
年度間比較、イベント単位の影響分析、支出後の内部残高シミュレーションなど、usecases.md に定義された表示項目に対応する記述が functions.md §10 に網羅されていません。

7. completed 積立への拠出停止メカニズムが未定義
拠出は「通常の支出トランザクション」で行われるため、積立が completed になってもカテゴリへの支出登録自体は可能です。どう制御するかが3文書とも未定義です。
